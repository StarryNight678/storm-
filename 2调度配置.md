# 调度器



sudo ln -s /home/jason/apache-storm-1.0.3  /usr/share/storm

sudo ln -s /usr/share/storm/bin    /usr/bin/storm


sudo mkdir /etc/storm

mv  storm.yaml  /etc/storm/

sudo ln -s /etc/storm/storm.yaml   /usr/share/storm/conf/storm.yaml


sudo rm -r  /usr/share/storm
sudo ln -s /home/jason/code/storm-0.8.2-new-run/   /usr/share/storm
sudo ln -s /etc/storm/storm.yaml   /usr/share/storm/conf/storm.yaml

# 编译运行

mvn clean install  # 可加上-DskipTests=true 跳过测试

mvn clean install -DskipTests=true

# git设置

将一个目录转变成一个 Git 仓库
切换到 ...../apache-storm-1.0.3/storm-core/src

git init


git config --global user.email zjhua678@163.com


让git显示颜色
git config --global color.ui true

 

添加文件
git add *


其他命令:

查看状态 git status

历史记录 git log

提交  git commit -m "new project"


# 目录改变

--jason--

grep -rin jason  

# 设置环境变量

export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64
export STORM_HOME=/usr/share/storm/
export PATH=/usr/bin/storm:$PATH


export ZK_HOME=/home/jason/2soft_install/zookeeper-3.4.10
export PATH=$PATH:$ZK_HOME/bin:$ZK_HOME/conf


source ~/.bashrc




# 替换
find . -name "*.java"  | xargs sed -i "s/backtype/org.apache/g"



dependency>
            <groupId>org.apache.storm</groupId>
            <artifactId>storm-core</artifactId>
            <version>1.0.3</version>
            <!-- keep storm dependencies out of the shaded jar -->
<!--            <scope>provided</scope>-->
        </dependency>





## 启动

zkServer.sh  start

storm nimbus

storm supervisor

storm ui


## 运行程序

cd /home/jason/1storm_code_test/Chapter01

storm jar /home/jason/1storm_code_test/Chapter01/target/word-count-1.0-SNAPSHOT.jar  storm.blueprints.chapter1.v1.WordCountTopology


# 更新程序


cp /home/jason/1storm_src/apache-storm-1.0.3/storm-core/target/storm-core-1.0.3.jar  /home/jason/apache-storm-1.0.3/lib



## 错误处理

当出现找不到 default.yaml 时.重新启动ui即可.